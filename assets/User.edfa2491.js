import{n as s,a as o,e as i,d as n,b as m}from"./index.7fc23838.js";const d={data(){return{dialogVisible:!1,form:{name:"",age:"",sex:"",birth:"",addr:""},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"}],age:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E74\u9F84"}],sex:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}],birth:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],addr:[{required:!0,message:"\u8BF7\u586B\u5199\u5730\u5740"}]},tableData:[],modalType:0,total:0,pageData:{page:1,limit:10},userForm:{name:""}}},methods:{submit(){this.$refs.form.validate(l=>{console.log(l,"valid"),l&&(this.modalType==0?o(this.form).then(()=>{this.getList()}):i(this.form).then(()=>{this.getList()}),this.$refs.form.resetFields(),this.dialogVisible=!1)})},handleClose(){this.$refs.form.resetFields(),this.dialogVisible=!1},handleEdit(l){this.modalType=1,this.dialogVisible=!0,this.form=JSON.parse(JSON.stringify(l))},handleDelete(l){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BE5\u6587\u4EF6, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{n({id:l.id}).then(()=>{this.$message({type:"success",message:"\u5220\u9664\u6210\u529F!"}),this.getList()})}).catch(()=>{this.$message({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},handleAdd(){this.modalType=0,this.dialogVisible=!0},getList(){m({params:{...this.userForm,...this.pageData}}).then(({data:l})=>{console.log(l),this.tableData=l.list,this.total=l.count||0})},handlePage(l){this.pageData.page=l,this.getList()},onSubmit(){this.getList()}},mounted(){this.getList()}};var u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"manage"},[t("el-dialog",{attrs:{title:"\u65B0\u589E\u7528\u6237",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,inline:!0,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"\u59D3\u540D",prop:"name"}},[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"\u5E74\u9F84",prop:"age"}},[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5E74\u9F84"},model:{value:e.form.age,callback:function(a){e.$set(e.form,"age",a)},expression:"form.age"}})],1),t("el-form-item",{attrs:{label:"\u6027\u522B",prop:"sex"}},[t("el-select",{attrs:{placeholder:"\u8BF7\u9009\u62E9"},model:{value:e.form.sex,callback:function(a){e.$set(e.form,"sex",a)},expression:"form.sex"}},[t("el-option",{attrs:{label:"\u7537",value:1}}),t("el-option",{attrs:{label:"\u5973",value:0}})],1)],1),t("el-form-item",{attrs:{label:"\u51FA\u751F\u65E5\u671F",prop:"birth"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"\u9009\u62E9\u65E5\u671F","value-format":"yyyy-MM-dd"},model:{value:e.form.birth,callback:function(a){e.$set(e.form,"birth",a)},expression:"form.birth"}})],1),t("el-form-item",{attrs:{label:"\u5730\u5740",prop:"addr"}},[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u5730\u5740"},model:{value:e.form.addr,callback:function(a){e.$set(e.form,"addr",a)},expression:"form.addr"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submit()}}},[e._v("\u6DFB \u52A0")])],1)],1),t("div",{staticClass:"manage-header"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(" + \u65B0\u589E ")]),t("el-form",{attrs:{inline:!0,model:e.userForm}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9"},model:{value:e.userForm.name,callback:function(a){e.$set(e.userForm,"name",a)},expression:"userForm.name"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\u641C\u7D22")])],1)],1)],1),t("div",{staticClass:"common-table"},[t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",height:"90%",data:e.tableData}},[t("el-table-column",{attrs:{prop:"name",label:"\u59D3\u540D"}}),t("el-table-column",{attrs:{prop:"sex",label:"\u6027\u522B"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(a.row.sex==1?"\u7537":"\u5973"))])]}}])}),t("el-table-column",{attrs:{prop:"age",label:"\u5E74\u9F84"}}),t("el-table-column",{attrs:{prop:"birth",label:"\u51FA\u751F\u65E5\u671F"}}),t("el-table-column",{attrs:{prop:"addr",label:"\u5730\u5740"}}),t("el-table-column",{attrs:{prop:"addr",label:"\u5730\u5740"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(a.row)}}},[e._v("\u7F16\u8F91")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(a.row)}}},[e._v("\u5220\u9664")])]}}])})],1),t("div",{staticClass:"pager"},[t("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total},on:{"current-change":e.handlePage}})],1)],1)],1)},c=[],p=s(d,u,c,!1,null,"dcd5b8ed",null,null);const h=p.exports;export{h as default};
